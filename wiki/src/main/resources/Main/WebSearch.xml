<?xml version="1.0" encoding="UTF-8"?>

<xwikidoc>
<web>Main</web>
<name>WebSearch</name>
<language></language>
<defaultLanguage>en</defaultLanguage>
<translation>0</translation>
<parent>Main.WebHome</parent>
<creator>XWiki.Admin</creator>
<author>XWiki.Admin</author>
<customClass></customClass>
<contentAuthor>XWiki.Admin</contentAuthor>
<creationDate>1107744420000</creationDate>
<date>1184488764000</date>
<contentUpdateDate>1184488764000</contentUpdateDate>
<version>1.1</version>
<title></title>
<template></template>
<defaultTemplate></defaultTemplate>
<validationScript></validationScript>
<comment></comment>
<minorEdit>false</minorEdit>
<syntaxId>xwiki/1.0</syntaxId>
<hidden>false</hidden>
<content>$xwiki.jsfx.use("uicomponents/search/search.js", false)##
$xwiki.ssfx.use("uicomponents/search/search.css", true)##
## Disable the document extra data: comments, attachments, history...
#set($docextras = [])
## ---------------
## Space filtering
## ---------------
#set($spaces = $xwiki.spaces)
#set($selectedSpace = "$!request.space")
## ---------------
## Space macros
## ---------------
#macro(spaceoption $space $selectedSpace)
  &lt;option value="${space}" #if($selectedSpace == $space)selected="selected"#end&gt;$space&lt;/option&gt;
#end
#macro(spaceselect $selectedSpace $spaces)
  &lt;select name="space" title="$msg.get('xe.search.bar.spaces.title')"&gt;
    &lt;option value="" #if($selectedSpace == '')selected="selected"#end&gt;$msg.get('xe.search.bar.spaces.all')&lt;/option&gt;
    #foreach($space in $spaces)
      #spaceoption($space $selectedSpace)
    #end
  &lt;/select&gt;
#end
##
##
#set($text = "$!request.getParameter('text')")
#set($utext = $util.encodeURI($text))
#if($selectedSpace == '')
  #set($url = $xwiki.getURL('Main.WebSearchRss', 'view', "xpage=plain&amp;amp;text=${utext}" ))
#else
  #set($url = $xwiki.getURL('Main.WebSearchRss', 'view', "xpage=plain&amp;space=${selectedSpace}&amp;text=${utext}"))
#end
##
&lt;h1&gt;&lt;span&gt;
  &lt;a style="float: right;" href="$url"&gt;&lt;img src="$xwiki.getSkinFile('icons/silk/feed.gif')" alt="$msg.get('xe.rss.icon')" /&gt;&lt;/a&gt;
  $msg.get('xe.search.title')&lt;/span&gt;
&lt;/h1&gt;
##
&lt;form action="" id="searchBar"&gt;
  {pre}
    &lt;div class="centered"&gt;
      &lt;input type="text" name="text" class="searchQuery #if($text == '') defaultText#end" #if($text == '') value="$msg.get('xe.search.bar.query.tip')" #else value="$xwiki.getXMLEncoded(${text})" #end title="$msg.get('xe.search.bar.query.title')"/&gt;
      #spaceselect($selectedSpace $spaces)
      &lt;input type="submit" class="searchButton" value="$msg.get('xe.search.bar.submit')" title="$msg.get('xe.search.bar.submit.title')"/&gt;
    &lt;/div&gt;
  {/pre}
&lt;/form&gt;
##
#set($space = $selectedSpace)
#includeInContext("XWiki.WebSearchCode")
#includeInContext("XWiki.Results")
##
#set($luceneSearch = "[$msg.get('xe.search.lucene')&gt;Main.LuceneSearch?text=$!utext]")
#info($msg.get('xe.search.lucene.try', [$luceneSearch]))</content>
</xwikidoc>
